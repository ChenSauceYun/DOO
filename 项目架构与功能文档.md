# DOOé¡¹ç›®æ¶æ„ä¸åŠŸèƒ½æ–‡æ¡£

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

**DOO** æ˜¯ä¸€ä¸ªåŸºäºuni-appå¼€å‘çš„çŸ­è§†é¢‘ç¤¾äº¤åº”ç”¨ï¼ŒåŒ…å«ç”¨æˆ·ç«¯å’Œç®¡ç†åå°ä¸¤ä¸ªç³»ç»Ÿã€‚

---

## äºŒã€æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: uni-app (Vue.js)
- **UIæ¡†æ¶**: è‡ªå®šä¹‰ç»„ä»¶ + SCSS
- **çŠ¶æ€ç®¡ç†**: Vuex (å¯é€‰)
- **ç½‘ç»œè¯·æ±‚**: uni.request
- **æœ¬åœ°å­˜å‚¨**: uni.getStorageSync / uni.setStorageSync

### åç«¯æŠ€æœ¯æ ˆ
- **è¯­è¨€**: PHP 7.x+
- **æ•°æ®åº“**: MySQL 5.7+
- **æ•°æ®åº“æ“ä½œ**: PDO
- **Sessionç®¡ç†**: PHP Session
- **å¯†ç åŠ å¯†**: password_hash / password_verify

### å¼€å‘å·¥å…·
- **å‰ç«¯**: HBuilderX
- **åç«¯**: ä»»æ„PHPç¼–è¾‘å™¨
- **æ•°æ®åº“**: MySQL Workbench / phpMyAdmin

---

## ä¸‰ã€é¡¹ç›®ç»“æ„

```
DOO/
â”œâ”€â”€ admin-web/              # åå°ç®¡ç†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ index.html         # åå°é¦–é¡µ
â”‚   â”œâ”€â”€ login.html         # åå°ç™»å½•é¡µ
â”‚   â”œâ”€â”€ script.js          # åå°JSé€»è¾‘
â”‚   â””â”€â”€ style.css         # åå°æ ·å¼
â”‚
â”œâ”€â”€ pages/                # Appç«¯é¡µé¢
â”‚   â”œâ”€â”€ login/            # ç™»å½•/æ³¨å†Œé¡µé¢
â”‚   â”œâ”€â”€ tabbar/           # åº•éƒ¨å¯¼èˆªé¡µé¢
â”‚   â”‚   â”œâ”€â”€ tabbar-1/     # é¦–é¡µï¼ˆæ¨è/å…³æ³¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ tabbar-2/     # ç”¨æˆ·åˆ—è¡¨/å…³æ³¨é¡µé¢
â”‚   â”‚   â”œâ”€â”€ tabbar-3/     # æ¶ˆæ¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ tabbar-4/     # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â””â”€â”€ tabbar-5/     # å‘å¸ƒé¡µé¢
â”‚   â””â”€â”€ user-detail/      # ç”¨æˆ·è¯¦æƒ…é¡µ
â”‚
â”œâ”€â”€ server/              # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ api/            # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ login.php          # ç”¨æˆ·ç™»å½•
â”‚   â”‚   â”œâ”€â”€ register.php       # ç”¨æˆ·æ³¨å†Œ
â”‚   â”‚   â”œâ”€â”€ logout.php         # ç”¨æˆ·ç™»å‡º
â”‚   â”‚   â”œâ”€â”€ get_users.php      # è·å–ç”¨æˆ·åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ get_videos.php     # è·å–è§†é¢‘åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ get_carousels.php  # è·å–è½®æ’­å›¾
â”‚   â”‚   â”œâ”€â”€ follow.php         # å…³æ³¨/å–æ¶ˆå…³æ³¨
â”‚   â”‚   â”œâ”€â”€ messages.php       # æ¶ˆæ¯åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ admin_login.php    # ç®¡ç†å‘˜ç™»å½•
â”‚   â”‚   â”œâ”€â”€ admin_logout.php   # ç®¡ç†å‘˜ç™»å‡º
â”‚   â”‚   â”œâ”€â”€ admin_videos.php   # è§†é¢‘ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ admin_users.php    # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ admin_carousels.php # è½®æ’­å›¾ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ reset_admin.php    # é‡ç½®ç®¡ç†å‘˜å¯†ç 
â”‚   â”‚   â””â”€â”€ check_admin_setup.php # æ£€æŸ¥ç®¡ç†å‘˜è®¾ç½®
â”‚   â”œâ”€â”€ config/         # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ Database.php      # æ•°æ®åº“è¿æ¥ç±»
â”‚   â”œâ”€â”€ sql/            # æ•°æ®åº“è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ database.sql       # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”‚   â””â”€â”€ follow_and_message.sql # å…³æ³¨å’Œæ¶ˆæ¯è¡¨
â”‚   â””â”€â”€ uploads/        # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”‚
â”œâ”€â”€ static/              # é™æ€èµ„æº
â”‚   â”œâ”€â”€ img/            # å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ logo.png        # Logo
â”‚
â”œâ”€â”€ App.vue            # Appä¸»ç»„ä»¶
â”œâ”€â”€ main.js            # å…¥å£æ–‡ä»¶
â”œâ”€â”€ manifest.json      # åº”ç”¨é…ç½®
â””â”€â”€ pages.json         # é¡µé¢é…ç½®
```

---

## å››ã€æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

#### 1. usersè¡¨ - ç”¨æˆ·ä¿¡æ¯
```sql
CREATE TABLE `users` (
    `id` INT AUTO_INCREMENT PRIMARY KEY,
    `username` VARCHAR(50) NOT NULL UNIQUE COMMENT 'ç”¨æˆ·å',
    `password` VARCHAR(255) NOT NULL COMMENT 'å¯†ç ',
    `nickname` VARCHAR(50) COMMENT 'æ˜µç§°',
    `avatar` VARCHAR(255) COMMENT 'å¤´åƒURL',
    `background_image` VARCHAR(255) COMMENT 'èƒŒæ™¯å›¾URL',
    `role` ENUM('user', 'admin') DEFAULT 'user' COMMENT 'è§’è‰²',
    `followers` INT DEFAULT 0 COMMENT 'ç²‰ä¸æ•°',
    `following` INT DEFAULT 0 COMMENT 'å…³æ³¨æ•°',
    `likes` INT DEFAULT 0 COMMENT 'è·èµæ•°',
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 2. videosè¡¨ - è§†é¢‘ä¿¡æ¯
```sql
CREATE TABLE `videos` (
    `id` INT AUTO_INCREMENT PRIMARY KEY,
    `user_id` INT NOT NULL COMMENT 'å‘å¸ƒè€…ID',
    `title` VARCHAR(255) NOT NULL COMMENT 'è§†é¢‘æ ‡é¢˜',
    `description` TEXT COMMENT 'è§†é¢‘æè¿°',
    `video_url` VARCHAR(255) NOT NULL COMMENT 'è§†é¢‘URL',
    `cover_url` VARCHAR(255) COMMENT 'å°é¢URL',
    `views` INT DEFAULT 0 COMMENT 'æ’­æ”¾é‡',
    `likes` INT DEFAULT 0 COMMENT 'ç‚¹èµæ•°',
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    FOREIGN KEY (`user_id`) REFERENCES `users`(`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 3. carouselsè¡¨ - è½®æ’­å›¾
```sql
CREATE TABLE `carousels` (
    `id` INT AUTO_INCREMENT PRIMARY KEY,
    `title` VARCHAR(255) NOT NULL COMMENT 'æ ‡é¢˜',
    `author` VARCHAR(50) COMMENT 'ä½œè€…',
    `image_url` VARCHAR(255) NOT NULL COMMENT 'å›¾ç‰‡URL',
    `sort_order` INT DEFAULT 0 COMMENT 'æ’åº',
    `is_active` TINYINT(1) DEFAULT 1 COMMENT 'æ˜¯å¦å¯ç”¨',
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 4. followsè¡¨ - å…³æ³¨å…³ç³»
```sql
CREATE TABLE `follows` (
    `id` INT AUTO_INCREMENT PRIMARY KEY,
    `follower_id` INT NOT NULL COMMENT 'å…³æ³¨è€…ID',
    `following_id` INT NOT NULL COMMENT 'è¢«å…³æ³¨è€…ID',
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'å…³æ³¨æ—¶é—´',
    UNIQUE KEY `unique_follow` (`follower_id`, `following_id`),
    FOREIGN KEY (`follower_id`) REFERENCES `users`(`id`),
    FOREIGN KEY (`following_id`) REFERENCES `users`(`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 5. messagesè¡¨ - æ¶ˆæ¯
```sql
CREATE TABLE `messages` (
    `id` INT AUTO_INCREMENT PRIMARY KEY,
    `sender_id` INT NOT NULL COMMENT 'å‘é€è€…ID',
    `receiver_id` INT NOT NULL COMMENT 'æ¥æ”¶è€…ID',
    `content` TEXT NOT NULL COMMENT 'æ¶ˆæ¯å†…å®¹',
    `is_read` TINYINT(1) DEFAULT 0 COMMENT 'æ˜¯å¦å·²è¯»',
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'å‘é€æ—¶é—´',
    FOREIGN KEY (`sender_id`) REFERENCES `users`(`id`),
    FOREIGN KEY (`receiver_id`) REFERENCES `users`(`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

---

## äº”ã€åŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·ç«¯åŠŸèƒ½

#### ç™»å½•/æ³¨å†Œæ¨¡å—
- ç”¨æˆ·æ³¨å†Œ
- ç”¨æˆ·ç™»å½•
- Sessionç®¡ç†
- è‡ªåŠ¨ç™»å½•æ£€æµ‹

#### é¦–é¡µæ¨¡å— (tabbar-1)
- è½®æ’­å›¾å±•ç¤º
- è§†é¢‘åˆ—è¡¨å±•ç¤º
- ä¸‹æ‹‰åˆ·æ–°
- æ•°æ®å®æ—¶åŒæ­¥

#### ç”¨æˆ·åˆ—è¡¨æ¨¡å— (tabbar-2)
- æ˜¾ç¤ºæ‰€æœ‰æ³¨å†Œç”¨æˆ·
- å…³æ³¨/å–æ¶ˆå…³æ³¨
- æŸ¥çœ‹å·²å…³æ³¨ç”¨æˆ·
- å‘é€ç§ä¿¡
- ä¸‹æ‹‰åˆ·æ–°

#### æ¶ˆæ¯æ¨¡å— (tabbar-3)
- æ¶ˆæ¯åˆ—è¡¨
- å‘é€æ¶ˆæ¯
- æ¶ˆæ¯çŠ¶æ€ç®¡ç†

#### ä¸ªäººä¸­å¿ƒæ¨¡å— (tabbar-4)
- ä¸ªäººä¿¡æ¯å±•ç¤º
- ç²‰ä¸/å…³æ³¨/è·èµç»Ÿè®¡
- ä¸ªäººè®¾ç½®

#### å‘å¸ƒæ¨¡å— (tabbar-5)
- å‘å¸ƒè§†é¢‘
- å‘å¸ƒåŠ¨æ€
- å†…å®¹ç¼–è¾‘

### 2. åå°ç®¡ç†åŠŸèƒ½

#### ç®¡ç†å‘˜ç™»å½•
- ç®¡ç†å‘˜èº«ä»½éªŒè¯
- Sessionç®¡ç†
- å®‰å…¨ç™»å‡º

#### è§†é¢‘ç®¡ç†
- æŸ¥çœ‹è§†é¢‘åˆ—è¡¨
- æ·»åŠ è§†é¢‘
- ç¼–è¾‘è§†é¢‘
- åˆ é™¤è§†é¢‘

#### ç”¨æˆ·ç®¡ç†
- æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨
- æ·»åŠ ç”¨æˆ·
- ç¼–è¾‘ç”¨æˆ·
- åˆ é™¤ç”¨æˆ·
- è§’è‰²ç®¡ç†

#### è½®æ’­å›¾ç®¡ç†
- æŸ¥çœ‹è½®æ’­å›¾åˆ—è¡¨
- æ·»åŠ è½®æ’­å›¾
- ç¼–è¾‘è½®æ’­å›¾
- åˆ é™¤è½®æ’­å›¾
- æ’åºç®¡ç†
- å¯ç”¨/ç¦ç”¨

---

## å…­ã€APIæ¥å£æ–‡æ¡£

### ç”¨æˆ·ç›¸å…³API

#### POST /api/login.php
**åŠŸèƒ½**: ç”¨æˆ·ç™»å½•

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "ç”¨æˆ·å",
  "password": "å¯†ç "
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "id": 1,
    "username": "admin",
    "nickname": "ç³»ç»Ÿç®¡ç†å‘˜",
    "avatar": null,
    "followers": 0,
    "following": 0,
    "likes": 0
  }
}
```

**Session**: è®¾ç½®ç”¨æˆ·session

---

#### POST /api/register.php
**åŠŸèƒ½**: ç”¨æˆ·æ³¨å†Œ

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "ç”¨æˆ·å",
  "password": "å¯†ç "
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 201,
  "message": "æ³¨å†ŒæˆåŠŸ"
}
```

---

#### GET /api/get_users.php
**åŠŸèƒ½**: è·å–ç”¨æˆ·åˆ—è¡¨

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "username": "admin",
      "nickname": "ç³»ç»Ÿç®¡ç†å‘˜",
      "avatar": null,
      "followers": 0,
      "following": 0,
      "likes": 0
    }
  ]
}
```

---

### å…³æ³¨ç›¸å…³API

#### GET /api/follow.php?action=following
**åŠŸèƒ½**: è·å–å·²å…³æ³¨åˆ—è¡¨

**Session**: å¿…éœ€

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": [
    {
      "id": 2,
      "username": "user2",
      "nickname": "ç”¨æˆ·2",
      "avatar": null,
      "followers": 0,
      "following": 0,
      "likes": 0
    }
  ]
}
```

---

#### GET /api/follow.php?action=check&user_id=X
**åŠŸèƒ½**: æ£€æŸ¥æ˜¯å¦å·²å…³æ³¨

**Session**: å¿…éœ€

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "is_following": true
  }
}
```

---

#### POST /api/follow.php
**åŠŸèƒ½**: å…³æ³¨ç”¨æˆ·

**Session**: å¿…éœ€

**è¯·æ±‚å‚æ•°**:
```json
{
  "user_id": 2
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 201,
  "message": "å…³æ³¨æˆåŠŸ"
}
```

---

#### DELETE /api/follow.php?user_id=X
**åŠŸèƒ½**: å–æ¶ˆå…³æ³¨

**Session**: å¿…éœ€

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "å–æ¶ˆå…³æ³¨æˆåŠŸ"
}
```

---

### æ¶ˆæ¯ç›¸å…³API

#### GET /api/messages.php
**åŠŸèƒ½**: è·å–æ¶ˆæ¯åˆ—è¡¨

**Session**: å¿…éœ€

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "sender_id": 1,
      "receiver_id": 2,
      "content": "ä½ å¥½",
      "is_read": 0,
      "created_at": "2024-01-01 12:00:00",
      "sender_name": "admin",
      "sender_nickname": "ç³»ç»Ÿç®¡ç†å‘˜"
    }
  ]
}
```

---

#### POST /api/messages.php
**åŠŸèƒ½**: å‘é€æ¶ˆæ¯

**Session**: å¿…éœ€

**è¯·æ±‚å‚æ•°**:
```json
{
  "receiver_id": 2,
  "content": "ä½ å¥½"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 201,
  "message": "å‘é€æˆåŠŸ"
}
```

---

#### PUT /api/messages.php?id=X
**åŠŸèƒ½**: æ ‡è®°æ¶ˆæ¯å·²è¯»

**Session**: å¿…éœ€

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ ‡è®°å·²è¯»æˆåŠŸ"
}
```

---

### å†…å®¹ç›¸å…³API

#### GET /api/get_videos.php
**åŠŸèƒ½**: è·å–è§†é¢‘åˆ—è¡¨

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "title": "æµ‹è¯•è§†é¢‘",
      "description": "æµ‹è¯•æè¿°",
      "video_url": "http://example.com/video.mp4",
      "cover": "http://example.com/cover.jpg",
      "views": "100æ¬¡æ’­æ”¾",
      "author": "admin"
    }
  ]
}
```

---

#### GET /api/get_carousels.php
**åŠŸèƒ½**: è·å–è½®æ’­å›¾

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "title": "çƒ­é—¨æ¨è",
      "author": "å®˜æ–¹æ¨è",
      "image": "http://example.com/banner.jpg",
      "sort": 1
    }
  ]
}
```

---

### ç®¡ç†å‘˜ç›¸å…³API

#### POST /api/admin_login.php
**åŠŸèƒ½**: ç®¡ç†å‘˜ç™»å½•

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "admin",
  "password": "admin123"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "id": 1,
    "username": "admin",
    "nickname": "ç³»ç»Ÿç®¡ç†å‘˜",
    "role": "admin"
  }
}
```

**Session**: è®¾ç½®ç®¡ç†å‘˜session

---

#### GET /api/admin_logout.php
**åŠŸèƒ½**: ç®¡ç†å‘˜ç™»å‡º

**Session**: æ¸…é™¤session

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "ç™»å‡ºæˆåŠŸ"
}
```

---

#### GET /api/admin_videos.php
**åŠŸèƒ½**: è·å–è§†é¢‘åˆ—è¡¨

**Session**: å¿…éœ€ï¼ˆç®¡ç†å‘˜ï¼‰

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "title": "æµ‹è¯•è§†é¢‘",
      "description": "æµ‹è¯•æè¿°",
      "video_url": "http://example.com/video.mp4",
      "cover_url": "http://example.com/cover.jpg",
      "views": 100,
      "likes": 0,
      "created_at": "2024-01-01 12:00:00"
    }
  ]
}
```

---

#### POST /api/admin_videos.php
**åŠŸèƒ½**: æ·»åŠ è§†é¢‘

**Session**: å¿…éœ€ï¼ˆç®¡ç†å‘˜ï¼‰

**è¯·æ±‚å‚æ•°**:
```json
{
  "title": "è§†é¢‘æ ‡é¢˜",
  "description": "è§†é¢‘æè¿°",
  "video_url": "http://example.com/video.mp4",
  "cover_url": "http://example.com/cover.jpg"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 201,
  "message": "æ·»åŠ æˆåŠŸ"
}
```

---

#### PUT /api/admin_videos.php
**åŠŸèƒ½**: æ›´æ–°è§†é¢‘

**Session**: å¿…éœ€ï¼ˆç®¡ç†å‘˜ï¼‰

**è¯·æ±‚å‚æ•°**:
```json
{
  "id": 1,
  "title": "è§†é¢‘æ ‡é¢˜",
  "description": "è§†é¢‘æè¿°",
  "video_url": "http://example.com/video.mp4",
  "cover_url": "http://example.com/cover.jpg"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ"
}
```

---

#### DELETE /api/admin_videos.php?id=X
**åŠŸèƒ½**: åˆ é™¤è§†é¢‘

**Session**: å¿…éœ€ï¼ˆç®¡ç†å‘˜ï¼‰

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ"
}
```

---

#### GET /api/admin_users.php
**åŠŸèƒ½**: è·å–ç”¨æˆ·åˆ—è¡¨

**Session**: å¿…éœ€ï¼ˆç®¡ç†å‘˜ï¼‰

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "username": "admin",
      "nickname": "ç³»ç»Ÿç®¡ç†å‘˜",
      "role": "admin",
      "followers": 0,
      "following": 0,
      "likes": 0,
      "created_at": "2024-01-01 12:00:00"
    }
  ]
}
```

---

#### POST /api/admin_users.php
**åŠŸèƒ½**: æ·»åŠ ç”¨æˆ·

**Session**: å¿…éœ€ï¼ˆç®¡ç†å‘˜ï¼‰

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "newuser",
  "password": "password123",
  "nickname": "æ–°ç”¨æˆ·",
  "role": "user"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 201,
  "message": "æ·»åŠ æˆåŠŸ"
}
```

---

#### PUT /api/admin_users.php
**åŠŸèƒ½**: æ›´æ–°ç”¨æˆ·

**Session**: å¿…éœ€ï¼ˆç®¡ç†å‘˜ï¼‰

**è¯·æ±‚å‚æ•°**:
```json
{
  "id": 1,
  "username": "admin",
  "nickname": "ç³»ç»Ÿç®¡ç†å‘˜",
  "role": "admin"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ"
}
```

---

#### DELETE /api/admin_users.php?id=X
**åŠŸèƒ½**: åˆ é™¤ç”¨æˆ·

**Session**: å¿…éœ€ï¼ˆç®¡ç†å‘˜ï¼‰

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ"
}
```

---

#### GET /api/admin_carousels.php
**åŠŸèƒ½**: è·å–è½®æ’­å›¾åˆ—è¡¨

**Session**: å¿…éœ€ï¼ˆç®¡ç†å‘˜ï¼‰

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "title": "çƒ­é—¨æ¨è",
      "author": "å®˜æ–¹æ¨è",
      "image_url": "http://example.com/banner.jpg",
      "sort_order": 1,
      "is_active": 1,
      "created_at": "2024-01-01 12:00:00"
    }
  ]
}
```

---

#### POST /api/admin_carousels.php
**åŠŸèƒ½**: æ·»åŠ è½®æ’­å›¾

**Session**: å¿…éœ€ï¼ˆç®¡ç†å‘˜ï¼‰

**è¯·æ±‚å‚æ•°**:
```json
{
  "title": "è½®æ’­å›¾æ ‡é¢˜",
  "author": "ä½œè€…",
  "image_url": "http://example.com/banner.jpg",
  "sort_order": 1
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 201,
  "message": "æ·»åŠ æˆåŠŸ"
}
```

---

#### PUT /api/admin_carousels.php
**åŠŸèƒ½**: æ›´æ–°è½®æ’­å›¾

**Session**: å¿…éœ€ï¼ˆç®¡ç†å‘˜ï¼‰

**è¯·æ±‚å‚æ•°**:
```json
{
  "id": 1,
  "title": "è½®æ’­å›¾æ ‡é¢˜",
  "author": "ä½œè€…",
  "image_url": "http://example.com/banner.jpg",
  "sort_order": 1,
  "is_active": 1
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ"
}
```

---

#### DELETE /api/admin_carousels.php?id=X
**åŠŸèƒ½**: åˆ é™¤è½®æ’­å›¾

**Session**: å¿…éœ€ï¼ˆç®¡ç†å‘˜ï¼‰

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ"
}
```

---

## ä¸ƒã€æ•°æ®æµç¨‹

### 1. ç”¨æˆ·ç™»å½•æµç¨‹
```
ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå¯†ç 
    â†“
å‰ç«¯å‘é€POSTè¯·æ±‚åˆ° /api/login.php
    â†“
åç«¯éªŒè¯ç”¨æˆ·åå’Œå¯†ç 
    â†“
éªŒè¯æˆåŠŸï¼Œè®¾ç½®session
    â†“
è¿”å›ç”¨æˆ·ä¿¡æ¯
    â†“
å‰ç«¯å­˜å‚¨ç”¨æˆ·ä¿¡æ¯åˆ°æœ¬åœ°
    â†“
è·³è½¬åˆ°é¦–é¡µ
```

### 2. å…³æ³¨æµç¨‹
```
ç”¨æˆ·ç‚¹å‡»å…³æ³¨æŒ‰é’®
    â†“
å‰ç«¯æ£€æŸ¥sessionæ˜¯å¦å­˜åœ¨
    â†“
å‘é€POSTè¯·æ±‚åˆ° /api/follow.php
    â†“
åç«¯éªŒè¯session
    â†“
æ£€æŸ¥æ˜¯å¦å·²å…³æ³¨
    â†“
æœªå…³æ³¨åˆ™æ·»åŠ å…³æ³¨è®°å½•
    â†“
æ›´æ–°ç”¨æˆ·ç»Ÿè®¡ï¼ˆç²‰ä¸æ•°ã€å…³æ³¨æ•°ï¼‰
    â†“
è¿”å›æˆåŠŸ
    â†“
å‰ç«¯æ›´æ–°UIçŠ¶æ€
```

### 3. æ•°æ®åŒæ­¥æµç¨‹
```
åå°ç®¡ç†æ·»åŠ /åˆ é™¤å†…å®¹
    â†“
æ•°æ®åº“æ›´æ–°
    â†“
ç”¨æˆ·ç«¯ä¸‹æ‹‰åˆ·æ–°
    â†“
å‰ç«¯è¯·æ±‚æœ€æ–°æ•°æ®
    â†“
åç«¯è¿”å›æœ€æ–°æ•°æ®
    â†“
å‰ç«¯æ›´æ–°UI
```

---

## å…«ã€å®‰å…¨æœºåˆ¶

### 1. è®¤è¯æœºåˆ¶
- **SessionéªŒè¯**: æ‰€æœ‰éœ€è¦ç™»å½•çš„æ¥å£éƒ½éªŒè¯session
- **å¯†ç åŠ å¯†**: ä½¿ç”¨password_hashåŠ å¯†å­˜å‚¨
- **å¯†ç éªŒè¯**: ä½¿ç”¨password_verifyéªŒè¯å¯†ç 
- **è§’è‰²æƒé™**: ç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·æƒé™åˆ†ç¦»

### 2. æ•°æ®éªŒè¯
- **è¾“å…¥éªŒè¯**: æ£€æŸ¥å¿…å¡«å­—æ®µ
- **SQLæ³¨å…¥é˜²æŠ¤**: ä½¿ç”¨PDOé¢„å¤„ç†è¯­å¥
- **XSSé˜²æŠ¤**: è¾“å‡ºæ—¶è¿›è¡Œè½¬ä¹‰
- **CSRFé˜²æŠ¤**: ä½¿ç”¨sessionéªŒè¯

### 3. é”™è¯¯å¤„ç†
- **ç»Ÿä¸€å“åº”æ ¼å¼**: `{code, message, data}`
- **é”™è¯¯æ—¥å¿—**: è®°å½•åˆ°PHPé”™è¯¯æ—¥å¿—
- **å‹å¥½æç¤º**: å‰ç«¯æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯

---

## ä¹ã€éƒ¨ç½²è¯´æ˜

### 1. ç¯å¢ƒè¦æ±‚
- PHP 7.0+
- MySQL 5.7+
- Apache/NginxæœåŠ¡å™¨
- æ”¯æŒPHPçš„WebæœåŠ¡å™¨

### 2. é…ç½®æ­¥éª¤
1. å¯¼å…¥æ•°æ®åº“è„šæœ¬åˆ°MySQL
2. é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯
3. ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
4. é…ç½®WebæœåŠ¡å™¨
5. è®¾ç½®æ–‡ä»¶æƒé™

### 3. è®¿é—®åœ°å€
- **ç”¨æˆ·ç«¯**: http://your-domain.com/
- **åå°ç®¡ç†**: http://your-domain.com/admin-web/
- **APIæ¥å£**: http://your-domain.com/server/api/

---

## åã€å·²å®ç°åŠŸèƒ½æ€»ç»“

### âœ… å·²å®ŒæˆåŠŸèƒ½
1. ç”¨æˆ·æ³¨å†Œ/ç™»å½•ç³»ç»Ÿ
2. ç”¨æˆ·ä¿¡æ¯ç®¡ç†
3. è§†é¢‘å±•ç¤ºå’Œç®¡ç†
4. è½®æ’­å›¾å±•ç¤ºå’Œç®¡ç†
5. ç”¨æˆ·å…³æ³¨/å–æ¶ˆå…³æ³¨
6. ç§ä¿¡æ¶ˆæ¯åŠŸèƒ½
7. åå°ç®¡ç†ç³»ç»Ÿ
8. æ•°æ®å®æ—¶åŒæ­¥
9. ä¸‹æ‹‰åˆ·æ–°åŠŸèƒ½
10. Sessionç®¡ç†

### ğŸ”„ å¾…å®Œå–„åŠŸèƒ½
1. è§†é¢‘ä¸Šä¼ åŠŸèƒ½
2. å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
3. è§†é¢‘æ’­æ”¾åŠŸèƒ½
4. ç‚¹èµåŠŸèƒ½
5. è¯„è®ºåŠŸèƒ½
6. æ¶ˆæ¯å®æ—¶æ¨é€
7. ç”¨æˆ·èµ„æ–™ç¼–è¾‘
8. æœç´¢åŠŸèƒ½
9. åˆ†äº«åŠŸèƒ½
10. é€šçŸ¥åŠŸèƒ½

---

## åä¸€ã€æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### å‰ç«¯æ ¸å¿ƒæ–‡ä»¶

#### pages/login/login.vue
- åŠŸèƒ½: ç”¨æˆ·ç™»å½•/æ³¨å†Œé¡µé¢
- ä¸»è¦æ–¹æ³•:
  - `login()`: ç”¨æˆ·ç™»å½•
  - `register()`: ç”¨æˆ·æ³¨å†Œ
  - `toggleMode()`: åˆ‡æ¢ç™»å½•/æ³¨å†Œæ¨¡å¼

#### pages/tabbar/tabbar-1/tabbar-1.vue
- åŠŸèƒ½: é¦–é¡µï¼ˆæ¨è/å…³æ³¨ï¼‰
- ä¸»è¦æ–¹æ³•:
  - `loadCarouselData()`: åŠ è½½è½®æ’­å›¾æ•°æ®
  - `loadCardData()`: åŠ è½½è§†é¢‘æ•°æ®
  - `onRefresh()`: ä¸‹æ‹‰åˆ·æ–°

#### pages/tabbar/tabbar-2/tabbar-2.vue
- åŠŸèƒ½: ç”¨æˆ·åˆ—è¡¨/å…³æ³¨é¡µé¢
- ä¸»è¦æ–¹æ³•:
  - `loadUserList()`: åŠ è½½ç”¨æˆ·åˆ—è¡¨
  - `loadFollowingList()`: åŠ è½½å…³æ³¨åˆ—è¡¨
  - `toggleFollow()`: åˆ‡æ¢å…³æ³¨çŠ¶æ€
  - `follow()`: å…³æ³¨ç”¨æˆ·
  - `unfollow()`: å–æ¶ˆå…³æ³¨
  - `sendMessage()`: å‘é€æ¶ˆæ¯

#### admin-web/script.js
- åŠŸèƒ½: åå°ç®¡ç†é€»è¾‘
- ä¸»è¦æ–¹æ³•:
  - `handleLogin()`: ç®¡ç†å‘˜ç™»å½•
  - `loadData()`: åŠ è½½æ•°æ®
  - `handleEdit()`: ç¼–è¾‘é¡¹ç›®
  - `handleDelete()`: åˆ é™¤é¡¹ç›®
  - `handleSave()`: ä¿å­˜é¡¹ç›®

### åç«¯æ ¸å¿ƒæ–‡ä»¶

#### server/api/login.php
- åŠŸèƒ½: ç”¨æˆ·ç™»å½•API
- ä¸»è¦é€»è¾‘:
  - éªŒè¯ç”¨æˆ·åå’Œå¯†ç 
  - è®¾ç½®session
  - è¿”å›ç”¨æˆ·ä¿¡æ¯

#### server/api/follow.php
- åŠŸèƒ½: å…³æ³¨/å–æ¶ˆå…³æ³¨API
- ä¸»è¦é€»è¾‘:
  - GET: è·å–å…³æ³¨åˆ—è¡¨/æ£€æŸ¥å…³æ³¨çŠ¶æ€
  - POST: å…³æ³¨ç”¨æˆ·
  - DELETE: å–æ¶ˆå…³æ³¨
  - æ›´æ–°ç”¨æˆ·ç»Ÿè®¡

#### server/api/messages.php
- åŠŸèƒ½: æ¶ˆæ¯API
- ä¸»è¦é€»è¾‘:
  - GET: è·å–æ¶ˆæ¯åˆ—è¡¨
  - POST: å‘é€æ¶ˆæ¯
  - PUT: æ ‡è®°æ¶ˆæ¯å·²è¯»

#### server/api/admin_login.php
- åŠŸèƒ½: ç®¡ç†å‘˜ç™»å½•API
- ä¸»è¦é€»è¾‘:
  - éªŒè¯ç®¡ç†å‘˜èº«ä»½
  - è®¾ç½®session
  - è¿”å›ç®¡ç†å‘˜ä¿¡æ¯

#### server/api/admin_videos.php
- åŠŸèƒ½: è§†é¢‘ç®¡ç†API
- ä¸»è¦é€»è¾‘:
  - GET: è·å–è§†é¢‘åˆ—è¡¨
  - POST: æ·»åŠ è§†é¢‘
  - PUT: æ›´æ–°è§†é¢‘
  - DELETE: åˆ é™¤è§†é¢‘

#### server/api/admin_users.php
- åŠŸèƒ½: ç”¨æˆ·ç®¡ç†API
- ä¸»è¦é€»è¾‘:
  - GET: è·å–ç”¨æˆ·åˆ—è¡¨
  - POST: æ·»åŠ ç”¨æˆ·
  - PUT: æ›´æ–°ç”¨æˆ·
  - DELETE: åˆ é™¤ç”¨æˆ·

#### server/api/admin_carousels.php
- åŠŸèƒ½: è½®æ’­å›¾ç®¡ç†API
- ä¸»è¦é€»è¾‘:
  - GET: è·å–è½®æ’­å›¾åˆ—è¡¨
  - POST: æ·»åŠ è½®æ’­å›¾
  - PUT: æ›´æ–°è½®æ’­å›¾
  - DELETE: åˆ é™¤è½®æ’­å›¾

#### server/config/Database.php
- åŠŸèƒ½: æ•°æ®åº“è¿æ¥ç±»
- ä¸»è¦æ–¹æ³•:
  - `__construct()`: æ„é€ å‡½æ•°
  - `getConnection()`: è·å–æ•°æ®åº“è¿æ¥

---

## åäºŒã€æ³¨æ„äº‹é¡¹

### 1. å®‰å…¨å»ºè®®
- å®šæœŸæ›´æ–°PHPå’ŒMySQLç‰ˆæœ¬
- ä½¿ç”¨HTTPSåè®®
- å®šæœŸå¤‡ä»½æ•°æ®åº“
- è®¾ç½®åˆç†çš„sessionè¿‡æœŸæ—¶é—´
- é™åˆ¶ç™»å½•å°è¯•æ¬¡æ•°

### 2. æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨æ•°æ®åº“ç´¢å¼•
- å¯ç”¨æŸ¥è¯¢ç¼“å­˜
- å‹ç¼©é™æ€èµ„æº
- ä½¿ç”¨CDNåŠ é€Ÿ
- ä¼˜åŒ–å›¾ç‰‡å¤§å°

### 3. æ‰©å±•å»ºè®®
- æ·»åŠ Redisç¼“å­˜
- å®ç°æ¶ˆæ¯é˜Ÿåˆ—
- ä½¿ç”¨WebSocketå®ç°å®æ—¶é€šä¿¡
- æ·»åŠ æ—¥å¿—ç³»ç»Ÿ
- å®ç°APIé™æµ

---

## åä¸‰ã€å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•é‡ç½®ç®¡ç†å‘˜å¯†ç ï¼Ÿ
A: è®¿é—® `/server/api/reset_admin.php` å³å¯é‡ç½®ç®¡ç†å‘˜å¯†ç ä¸º `admin123`

### Q2: å¦‚ä½•æ£€æŸ¥æ•°æ®åº“è¿æ¥ï¼Ÿ
A: è®¿é—® `/server/api/check_admin_setup.php` æŸ¥çœ‹æ•°æ®åº“è¿æ¥çŠ¶æ€

### Q3: å¦‚ä½•æ·»åŠ æ–°çš„APIæ¥å£ï¼Ÿ
A: åœ¨ `server/api/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„PHPæ–‡ä»¶ï¼Œéµå¾ªç°æœ‰çš„ä»£ç è§„èŒƒ

### Q4: å¦‚ä½•ä¿®æ”¹æ•°æ®åº“é…ç½®ï¼Ÿ
A: ç¼–è¾‘ `server/config/Database.php` æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“è¿æ¥ä¿¡æ¯

### Q5: å¦‚ä½•éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Ÿ
A: å‚è€ƒç¬¬ä¹ç« çš„éƒ¨ç½²è¯´æ˜ï¼Œç¡®ä¿æœåŠ¡å™¨ç¯å¢ƒæ»¡è¶³è¦æ±‚

---

## åå››ã€ç‰ˆæœ¬å†å²

### v1.0.0 (2024-01-20)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å®ç°ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- å®ç°è§†é¢‘ç®¡ç†
- å®ç°è½®æ’­å›¾ç®¡ç†
- å®ç°ç”¨æˆ·å…³æ³¨åŠŸèƒ½
- å®ç°æ¶ˆæ¯åŠŸèƒ½
- å®ç°åå°ç®¡ç†ç³»ç»Ÿ

---

## åäº”ã€è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
**æœ€åæ›´æ–°**: 2024-01-20
**ç»´æŠ¤è€…**: DOOå¼€å‘å›¢é˜Ÿ
